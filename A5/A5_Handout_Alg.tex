\documentclass[10pt,twocolumn]{article}
\usepackage[margin=0.75in]{geometry}                % See geometry.pdf to learn the layout options. There are lots.
\geometry{letterpaper}                   % ... or a4paper or a5paper or ... 
%\geometry{landscape}                % Activate for for rotated page geometry
%\usepackage[parfill]{parskip}    % Activate to begin paragraphs with an empty line rather than an indent
\setlength{\columnsep}{1cm}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{epstopdf}
\usepackage{fullpage}
\usepackage[usenames]{color}
\usepackage{titlesec}
\usepackage{hyperref}
\usepackage{framed}
\usepackage{algorithmic}

\definecolor{light-gray}{gray}{0.45}
\titleformat{\section}
{\color{black}\normalfont\Large\bfseries}
{\color{black}\thesection}{1em}{}

\titleformat{\subsection}
{\color{light-gray}\normalfont\large\bfseries}
{\color{light-gray}\thesubsection}{1em}{}

\DeclareGraphicsRule{.tif}{png}{.png}{`convert #1 `dirname #1`/`basename #1 .tif`.png}

\title{\Huge{\bf Algorithm 5: Ray}}
\author{Comp175: Introduction to Computer Graphics -- Spring 2015}
\date{Algorithm due:  {\bf Monday April 20th} at 11:59pm}                                         % Activate to display a given date or no date

\begin{document}
\maketitle
%\section{}
%\subsection{}

\begin{verbatim}
Your Names: ___Matthew Cardarelli___

            ___Matthew Brenman___

Your CS Logins: ___mcarda01___

                ___mbrenm01___
\end{verbatim}

\section{Instructions}
Complete this assignment only with your teammate. When a numerical answer is required, provide a reduced fraction (i.e. 1/3) or at least three decimal places (i.e. 0.333). Show all work; write your answers on this sheet. This algorithm handout is worth 3\% of your final grade for the class.

\begin{framed}
\noindent{\bf[2 points]} The high-level view of our ray tracer is exactly the same as for intersect, except for a few additions. Below is the high-level pseudocode for {\tt Intersect}. What needs to be changed/added to make this a full-fledged raytracer? Just specify what changes need to be made {no pseudocode please.}

\footnotesize{
\begin{algorithmic}
\FOR{$point \in Canvas$}
	\STATE Cast a ray to find the nearest object
	\IF{ray intersects an object}
		\FOR{each light}
			\STATE Cast a ray to the light and evaluate the lighting equation\\
			\STATE $Canvas[pt] = Canvas[pt]+ color$ with only diffuse/ambient components\\
		\ENDFOR
	\ELSE 
		\STATE $Canvas[pt] =$ background color
	\ENDIF
\ENDFOR

\vspace{3em}

After the nearest object is found, we need to calculate the ray that bounces off of that object (which depends on the surface normal and the ray that we sent) and incorporate the colors from that (which can recursively be called). The amount that this added portion affects the color depends on properties of the surface.

\end{algorithmic}
}

\end{framed}

\begin{framed}
\noindent{\bf[2 points]} Given a vector $\vec{v}$ and a surface normal $\vec{n}$, find the equation for the vector $\vec{r}$ which is the reflection of $\vec{v}$ about $\vec{n}$ (i.e. in the equal and opposite direction). Write your equation in terms of vector operations. How do you compute the color contributed by the reflected ray? Give a brief description.
% \includegraphics[width=2.8in]{reflection.png}

The equation for the reflected ray is:\\
$\hat{r} = \vec{d} - 2(\hat{d}\cdot\hat{n})\hat{n}$\\


The color added is the color based on what that reflected ray hits (which may depend on recursive reflections) and the reflective properties about the surface.

\vskip 13em
\end{framed}

\begin{framed}
\noindent{\bf[1 point]} Is ray tracing a local or global illumination algorithm? Why?
\vskip 12em
\end{framed}

\begin{framed}
\noindent{\bf[1 point]} For a particular ray that intersects with an object, when do you not consider contribution from a given light source? How do you computationally determine when this scenario occurs?
\vskip 7em
You do not consider contribution when there is another object in the way. This can be computed be calling the intersection function, but changing the eye point from the camera position to the position of the previous intersection, and the ray to the vector from light source to the intersection point. This is where we want to use an epsilon to avoid errors due to floating point inaccuracies, which could place the intersection point inside the object if we are not careful.
\end{framed}

\begin{framed}
\noindent{\bf[2 points]} Recall that we can think of texture mapping in two steps. First, mapping from the object to the unit square, and second, mapping from the unit square to the texture map. Let $a$ and $b$ be the $x$ and $y$ values in the unit square that a particular point on an object gets mapped to in the first step. Note that $a$ and $b$ are calculated differently depending on the object. From here, how do you find the coordinates $(s, t)$ to look up in a texture map in terms of $a, b, u, v, w$ and $h$, where $u$ and $v$ are the number of repetitions in the $x$ and $y$
directions, respectively, $w$ is the texture width, and $h$ is the texture height?
\vskip 12em

The coordinates can be found using:\\

$s = (u \cdot a \cdot w)\ \%\ w$\\

$t = (v \cdot b \cdot h)\ \%\ h$


\end{framed}
\vskip 6em

\begin{framed}
\noindent{\bf[1 point]} How do you use the color from the texture map and the {\tt blend} value in the lighting equation?
\vskip 6em
The color from the texture map is used as the object color for rays that intersect the object at that coordinate. When a ray intersects with the object, the mapping from object coordinates to texture map is made to retrieve the correct color for that pixel. Blend is used to determine the ratio that the texture color should be combined with the object's base color.
\end{framed}

\begin{framed}
\noindent{\bf[1 point]}  What is the Phong lighting model used for? What is the purpose of its exponent?
\vskip 6em

The Phong model is used for adding specular highlighting. It combines a reflection constant with the intensity of the light and a power of the cosine of the angle between viewing angle and reflected ray angle to produce a highlight at a point. The exponent is used to control the rate at which the highlight intensity dissipates as the angle between the view and reflected ray increases.

\end{framed}

\section{How to Submit}

Hand in a PDF version of your solutions using the following command:
\begin{center}
 {\tt provide comp175 a5-alg}
 \end{center}
\end{document}  
